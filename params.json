{"name":"After-all","tagline":"Call several asynchronous functions and invoke a callback 'after all' of them are done.","body":"# after-all\r\n\r\n[![build status](https://secure.travis-ci.org/sorribas/after-all.png)](http://travis-ci.org/sorribas/after-all)\r\n\r\nCall several asynchronous functions and invoke a callback 'after all' of them are done.\r\n\r\n## Installation\r\n\r\nYou can install it with npm.\r\n\r\n```\r\nnpm install after-all\r\n```\r\n\r\n## Simple example\r\n\r\n```js\r\nvar afterAll = require('after-all');\r\nvar next = afterAll(done);\r\n\r\nsetTimeout(next(function() {\r\n  console.log('Step two.');\r\n}), 500);\r\n\r\nsetTimeout(next(function() {\r\n  console.log('Step one.');\r\n}), 100);\r\n\r\nfunction done() {\r\n  console.log(\"Yay we're done!\");\r\n}\r\n```\r\n\r\n## More complex example and sample use case\r\n\r\nImagine you have to create a dashboard page which has a list of customers\r\na list products, the total amount of sales and some more information.\r\n\r\nNow, the queries to get this information are independent, yet we tend to wait for\r\none to be finished to start the next. We may be able to increase the performance\r\nby starting some of this queries at the same time and waiting for the callbacks.\r\n\r\nWe can use after-all to do something like this.\r\n\r\n```js\r\n\r\napp.get('/dashboard.json', function(req, res) {\r\n  var resp = {};\r\n  var next = afterAll(function() {\r\n    res.end(resp);\r\n  });\r\n\r\n  db.findCustomers(next(function(err, docs) {\r\n    resp.customers = docs;\r\n  }));\r\n\r\n  db.findProducts(next(function(err, docs) {\r\n    resp.products = docs;\r\n  }));\r\n\r\n  db.findTodaySalesAmount(next(function(err, amount) {\r\n    resp.todaySales = amount;\r\n  }));\r\n\r\n  db.findLastMonthSalesAmount(next(function(err, amount) {\r\n    resp.lastMonthSales = amount;\r\n  }));\r\n});\r\n```\r\n\r\n## Error handling\r\n\r\nIf an error is passed as the first parameter to the `next` callback, the \r\nfinal callback will be called immediately and the error will be passed to\r\nit as the first argument.\r\n\r\n## License\r\n\r\nMIT\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}